<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tu Universo C√≥smico</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Lora:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Paleta de colores m√°s rica y profunda para el universo */
            --space-bg-1: #2E0249; /* Violeta profundo */
            --space-bg-2: #570A57; /* Magenta oscuro */
            --space-bg-3: #A91079; /* Rosa intenso */
            --star-gold: #F7FD04;
            --heart-pink: #FF6BADB3;
            --text-cream: #FFF8E7;
            --glass-border: rgba(255, 248, 231, 0.3);
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden; /* Crucial para la inmersi√≥n */
            background: #000;
            font-family: 'Lora', serif;
            display: flex;
            justify-content: center;
            align-items: center;
            position: fixed; /* Fija la pantalla en m√≥viles */
            cursor: crosshair; /* Sugiere interactividad */
        }

        /* --- Capas del Universo Inmersivo --- */
        .universe-layer {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; /* El click debe traspasar al body */
        }

        /* Capa 1: Gradiente base profundo */
        .bg-deep {
            background: radial-gradient(ellipse at bottom, var(--space-bg-2) 0%, var(--space-bg-1) 60%, #000 100%);
            z-index: -5;
        }

        /* Capa 2: Nebulosa giratoria suave */
        .bg-nebula {
            background: radial-gradient(circle at 50% 50%, rgba(169, 16, 121, 0.4), transparent 70%),
                        radial-gradient(circle at 20% 80%, rgba(87, 10, 87, 0.5), transparent 60%);
            filter: blur(30px);
            opacity: 0.7;
            animation: nebulaRotate 60s infinite linear;
            z-index: -4;
        }

        /* Capa 3: Polvo estelar flotante */
        .star-dust {
            position: absolute;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 5px white, 0 0 10px var(--star-gold);
            opacity: 0;
            animation: driftStars 20s infinite linear;
        }

        /* --- El S√≠mbolo Central: Coraz√≥n C√≥smico --- */
        .cosmic-heart-core {
            position: relative;
            width: 120px;
            height: 120px;
            margin-bottom: 4vh;
            z-index: 2;
            animation: cosmicHeartbeat 4s ease-in-out infinite;
        }

        .heart-shape-glow {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            /* Creaci√≥n de forma de coraz√≥n con CSS */
            background: radial-gradient(circle at 30% 30%, var(--star-gold), var(--heart-pink));
            box-shadow: 0 0 50px var(--heart-pink), inset 0 0 20px var(--star-gold);
            transform: rotate(45deg);
        }
        .heart-shape-glow::before, .heart-shape-glow::after {
            content: ''; position: absolute; width: 100%; height: 100%;
            background: inherit; border-radius: 50%; box-shadow: inherit;
        }
        .heart-shape-glow::before { left: -50%; }
        .heart-shape-glow::after { top: -50%; }


        /* --- Contenedor de Cristal PRO (Legibilidad) --- */
        #stage {
            position: relative;
            width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            padding: 20px; box-sizing: border-box; z-index: 10; pointer-events: none; /* Permite clicks a trav√©s */
        }

        .glass-panel {
            pointer-events: auto; /* Atrapa clicks dentro del panel */
            position: relative;
            /* Ancho responsivo inteligente */
            width: clamp(300px, 85vw, 700px);
            min-height: 35vh;
            /* Glassmorphism m√°s limpio */
            background: rgba(46, 2, 73, 0.4); /* Base oscura transparente */
            backdrop-filter: blur(25px) saturate(110%);
            -webkit-backdrop-filter: blur(25px) saturate(110%);
            border-radius: 30px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 25px 50px rgba(0,0,0,0.5), inset 0 0 20px rgba(255,255,255,0.05);
            padding: clamp(2rem, 5vw, 4rem); /* Padding din√°mico */
            display: flex; justify-content: center; align-items: center;
            text-align: center; box-sizing: border-box;
        }

        /* --- Tipograf√≠a y Estados del Texto --- */
        .text-content {
            /* Tama√±o de fuente din√°mico usando clamp para legibilidad perfecta */
            font-size: clamp(1.2rem, 2.5vw, 1.6rem);
            color: var(--text-cream);
            line-height: 1.8;
            font-weight: 500;
            opacity: 1;
            transition: opacity 1s cubic-bezier(0.4, 0, 0.2, 1), transform 1s cubic-bezier(0.4, 0, 0.2, 1);
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .text-hidden { opacity: 0; transform: translateY(20px) scale(0.95); }

        /* Estilos de √©nfasis */
        .highlight-gold {
            font-family: 'Great Vibes', cursive;
            font-size: clamp(2rem, 4vw, 3rem);
            color: var(--star-gold);
            display: block; margin-top: 1.5rem;
            text-shadow: 0 0 15px rgba(247, 253, 4, 0.5);
        }

        .highlight-love {
            font-family: 'Great Vibes', cursive;
            font-size: clamp(2.5rem, 5vw, 3.8rem);
            background: linear-gradient(to right, var(--star-gold), var(--heart-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: block; margin: 2rem 0; padding: 0 10px;
            filter: drop-shadow(0 0 10px rgba(255, 107, 173, 0.4));
        }

        .final-z-symbol {
            font-family: 'Great Vibes', cursive;
            font-size: clamp(6rem, 15vw, 10rem);
            background: linear-gradient(45deg, var(--text-cream), var(--star-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 20px var(--star-gold));
            opacity: 0; transform: scale(0.8) rotate(-10deg);
            animation: revealSymbol 5s forwards ease-out;
        }

        .typing-cursor::after { content: '|'; margin-left: 4px; color: var(--star-gold); animation: blink 1s infinite; }

        /* --- ELEMENTOS INTERACTIVOS (Bomba de amor al hacer click) --- */
        #interaction-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 20; overflow: hidden;
        }

        .burst-particle {
            position: absolute;
            pointer-events: none;
            /* La animaci√≥n se define en JS mediante variables CSS */
            animation: burstAndFall var(--burst-duration) ease-out forwards;
        }

        /* Tipos de part√≠culas */
        .particle-heart { font-size: var(--particle-size); color: var(--heart-pink); text-shadow: 0 0 10px var(--heart-pink); }
        .particle-star { font-size: var(--particle-size); color: var(--star-gold); text-shadow: 0 0 10px var(--star-gold); }


        /* --- Pantalla de Inicio --- */
        #start-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #1a001a; z-index: 100;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            cursor: pointer; transition: opacity 0.8s ease;
        }
        #start-screen h1 {
            font-family: 'Great Vibes', cursive; font-size: 3.5rem;
            color: var(--star-gold); margin-bottom: 1rem;
            text-shadow: 0 0 20px var(--heart-pink);
        }
        #start-screen p {
            font-size: 1.1rem; color: var(--text-cream); letter-spacing: 2px;
            text-transform: uppercase; animation: pulseText 2s infinite;
        }

        /* --- Animaciones CSS --- */
        @keyframes nebulaRotate { from { transform: rotate(0deg) scale(1); } to { transform: rotate(360deg) scale(1.1); } }
        @keyframes driftStars { 0% { transform: translateY(100vh) translateX(-50px); opacity: 0; } 50% { opacity: 0.8; } 100% { transform: translateY(-10vh) translateX(50px); opacity: 0; } }
        @keyframes cosmicHeartbeat { 0%, 100% { transform: scale(1); filter: brightness(1); } 50% { transform: scale(1.15) rotate(2deg); filter: brightness(1.3) drop-shadow(0 0 30px var(--heart-pink)); } }
        @keyframes blink { 50% { opacity: 0; } }
        @keyframes pulseText { 50% { opacity: 0.5; } }
        @keyframes revealSymbol { to { opacity: 1; transform: scale(1) rotate(0deg); } }

        /* Animaci√≥n compleja para el click interactivo (Gravedad + Explosi√≥n) */
        @keyframes burstAndFall {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(0) rotate(0deg);
            }
            20% {
                 opacity: 1;
                 /* Explosi√≥n inicial hacia afuera */
                 transform: translate(var(--dest-x), var(--dest-y)) scale(1.2) rotate(var(--rot));
            }
            100% {
                opacity: 0;
                /* Ca√≠da por gravedad y desvanecimiento */
                transform: translate(var(--dest-x), calc(var(--dest-y) + 150px)) scale(0.5) rotate(calc(var(--rot) + 180deg));
            }
        }

    </style>
</head>
<body>

    <div id="start-screen">
        <h1>Tu Universo Privado</h1>
        <p>[ Toca para entrar ]</p>
    </div>

    <audio id="bg-music" loop preload="auto">
        <source src="https://incompetech.com/music/royalty-free/mp3-royaltyfree/Deep%20Space.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="click-sound" preload="auto">
         <source src="https://freesound.org/data/previews/321/321257_5260872-lq.mp3" type="audio/mpeg">
    </audio>

    <div class="universe-layer bg-deep"></div>
    <div class="universe-layer bg-nebula"></div>
    <div class="universe-layer" id="star-dust-container"></div>
    
    <div id="interaction-layer"></div>

    <div id="stage">
        <div class="cosmic-heart-core">
            <div class="heart-shape-glow"></div>
        </div>

        <div class="glass-panel">
            <div class="text-content typing-cursor" id="dynamic-text"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Referencias al DOM
            const startScreen = document.getElementById('start-screen');
            const bgMusic = document.getElementById('bg-music');
            const clickSoundBase = document.getElementById('click-sound');
            const dynamicText = document.getElementById('dynamic-text');
            const starDustContainer = document.getElementById('star-dust-container');
            const interactionLayer = document.getElementById('interaction-layer');

            // Configuraci√≥n de volumen inicial
            clickSoundBase.volume = 0.4; 

            // --- Secuencia de Frases (Optimizada para ternura y legibilidad) ---
            const sequence = [
                { text: "En la vastedad del espacio y el tiempo...", type: 'normal', pause: 2500 },
                { text: "Existe una singularidad perfecta: T√∫.", type: 'highlight-gold', pause: 3500 },
                { text: "Eres la coincidencia m√°s hermosa del universo.", type: 'normal', pause: 3000 },
                { text: "Una supernova de ternura y luz genuina.", type: 'highlight-love', pause: 4000 },
                { text: "Tu gravedad atrae todo lo bueno...", type: 'normal', pause: 2500 },
                { text: "...y hace que este mundo se sienta como un hogar.", type: 'highlight-gold', pause: 3500 },
                { text: "Eres, y siempre ser√°s, mi milagro favorito.", type: 'highlight-love', pause: 4500 },
                { text: "z", type: 'final', pause: 15000 } // S√≠mbolo final
            ];

            // --- Funci√≥n de M√°quina de Escribir Fluida ---
            async function typeWriter(text, element) {
                element.innerHTML = '';
                element.classList.add('typing-cursor');
                
                for (let i = 0; i < text.length; i++) {
                    element.innerHTML += text.charAt(i);
                    // Velocidad variable para mayor naturalidad
                    let speed = 60 + (Math.random() * 30); 
                    if (['.', ',', '...'].includes(text.charAt(i))) speed += 400; // Pausas naturales
                    await new Promise(resolve => setTimeout(resolve, speed));
                }
            }

            // --- Ejecuci√≥n de la Secuencia ---
            async function runSequence() {
                for (let i = 0; i < sequence.length; i++) {
                    const item = sequence[i];
                    dynamicText.className = 'text-content typing-cursor'; // Reset

                    if (item.type === 'final') {
                         dynamicText.classList.remove('typing-cursor');
                         dynamicText.innerHTML = `<span class="final-z-symbol">${item.text}</span>`;
                    } else {
                        if(item.type !== 'normal') dynamicText.classList.add(item.type);
                        await typeWriter(item.text, dynamicText);
                    }

                    await new Promise(resolve => setTimeout(resolve, item.pause));

                    if (i < sequence.length - 1) {
                        dynamicText.classList.add('text-hidden');
                        await new Promise(resolve => setTimeout(resolve, 1000)); // Espera transici√≥n de salida
                    }
                }
            }

            // --- Generador de Polvo Estelar (Fondo) ---
            function createStarDust() {
                const count = window.innerWidth < 768 ? 40 : 80; // Menos part√≠culas en m√≥vil
                for (let i = 0; i < count; i++) {
                    const star = document.createElement('div');
                    star.classList.add('star-dust');
                    const size = Math.random() * 3 + 1;
                    star.style.width = `${size}px`; star.style.height = `${size}px`;
                    star.style.left = `${Math.random() * 100}%`;
                    star.style.top = `${Math.random() * 100}%`;
                    star.style.animationDelay = `-${Math.random() * 20}s`;
                    star.style.animationDuration = `${Math.random() * 15 + 15}s`;
                    starDustContainer.appendChild(star);
                }
            }

            // --- SISTEMA DE INTERACTIVIDAD (CLICK/TOUCH) ---
            
            // Funci√≥n para reproducir el sonido de click sin solapamiento
            function playClickSound() {
                // Clonamos el nodo de audio para poder reproducirlo m√∫ltiples veces simult√°neamente
                const soundClone = clickSoundBase.cloneNode();
                soundClone.volume = 0.3; // Volumen suave
                soundClone.play().catch(() => {}); // Ignorar errores si se spamea mucho
            }

            // Funci√≥n principal que genera la explosi√≥n
            function createInteractionBurst(x, y) {
                playClickSound(); // Sonido multisensorial

                const particleCount = 12; // Cantidad de elementos por click
                const symbols = ['‚ù§', '‚ú®', '‚≠ê', 'üíñ'];

                for (let i = 0; i < particleCount; i++) {
                    const particle = document.createElement('div');
                    particle.classList.add('burst-particle');
                    
                    // Elegir s√≠mbolo aleatorio y asignar clase
                    const symbol = symbols[Math.floor(Math.random() * symbols.length)];
                    particle.textContent = symbol;
                    particle.classList.add(symbol.includes('‚ù§') || symbol.includes('üíñ') ? 'particle-heart' : 'particle-star');
                    
                    // Posicionar en el lugar del click
                    particle.style.left = `${x}px`;
                    particle.style.top = `${y}px`;

                    // C√°lculos para la animaci√≥n de explosi√≥n (Variables CSS)
                    const destX = (Math.random() - 0.5) * 250; // Dispersi√≥n horizontal
                    const destY = (Math.random() - 0.5) * 250 - 50; // Dispersi√≥n vertical (tendencia hacia arriba inicial)
                    const rot = (Math.random() - 0.5) * 360; // Rotaci√≥n aleatoria
                    const size = Math.random() * 1.5 + 0.8; // Tama√±o variable
                    const duration = Math.random() * 1 + 1.5; // Duraci√≥n entre 1.5s y 2.5s

                    // Asignar variables CSS al elemento
                    particle.style.setProperty('--dest-x', `${destX}px`);
                    particle.style.setProperty('--dest-y', `${destY}px`);
                    particle.style.setProperty('--rot', `${rot}deg`);
                    particle.style.setProperty('--particle-size', `${size}rem`);
                    particle.style.setProperty('--burst-duration', `${duration}s`);

                    interactionLayer.appendChild(particle);

                    // Limpieza: Eliminar el elemento del DOM al finalizar la animaci√≥n
                    setTimeout(() => {
                        particle.remove();
                    }, duration * 1000);
                }
            }

            // Event Listener global para clicks y toques
            ['click', 'touchstart'].forEach(eventType => {
                document.addEventListener(eventType, (e) => {
                    // Obtener coordenadas (compatible con touch y mouse)
                    let x = e.clientX;
                    let y = e.clientY;
                    if (eventType === 'touchstart') {
                        x = e.touches[0].clientX;
                        y = e.touches[0].clientY;
                        // Evitar que el touchstart dispare tambi√©n un click en algunos m√≥viles
                        if (e.target !== startScreen && !startScreen.contains(e.target)) {
                            // e.preventDefault(); 
                        }
                    }

                    // No generar efecto si se clickea en la pantalla de inicio antes de que desaparezca
                    if (startScreen.style.opacity !== '0') return;

                    createInteractionBurst(x, y);
                }, { passive: false });
            });


            // --- INICIO DE LA EXPERIENCIA ---
            startScreen.addEventListener('click', handleStart);
            startScreen.addEventListener('touchstart', handleStart, { passive: false });

            function handleStart(e) {
                if(e.type === 'touchstart') e.preventDefault(); // Asegurar inicio en m√≥vil
                
                startScreen.style.pointerEvents = 'none'; // Evitar doble click
                startScreen.style.opacity = 0;
                setTimeout(() => startScreen.style.display = 'none', 800);

                // Fade-in de la m√∫sica ambiental
                bgMusic.volume = 0;
                bgMusic.play().then(() => {
                    let vol = 0;
                    const interval = setInterval(() => {
                        if (vol < 0.6) { vol += 0.05; bgMusic.volume = vol; } 
                        else { clearInterval(interval); }
                    }, 200);
                }).catch(e => console.log("Audio requiere interacci√≥n:", e));

                createStarDust();
                setTimeout(runSequence, 1500);
            }
        });
    </script>
</body>
</html>
