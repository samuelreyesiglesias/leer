<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Una Carta para Ti</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Parisienne&display=swap" rel="stylesheet">
    <style>
        :root {
            --deep-wine: #2a0815;
            --rich-purple: #4a1259;
            --rose-gold: #e0bfb8;
            --bright-gold: #ffd700;
            --text-light: #fdf0f6;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
            background: #000;
            font-family: 'Cormorant Garamond', serif;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- Capas de Fondo Inmersivas --- */
        .background-aurora {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(ellipse at center, var(--rich-purple) 0%, var(--deep-wine) 40%, #050005 80%);
            filter: blur(80px);
            opacity: 0.7;
            animation: auroraMove 30s infinite alternate ease-in-out;
            z-index: -3;
        }

        .bokeh-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            pointer-events: none;
        }

        .bokeh {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 215, 0, 0.15);
            box-shadow: 0 0 20px rgba(224, 191, 184, 0.2);
            animation: floatBokeh 15s infinite linear;
        }

        /* --- Escenario 3D Principal --- */
        #stage {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
            transform-style: preserve-3d;
            transition: transform 0.3s ease-out;
        }

        /* --- El Nuevo "Núcleo de Amor" (Reemplazo del Emoji) --- */
        .love-core-container {
            position: relative;
            width: 120px;
            height: 120px;
            margin-bottom: 40px;
            transform: translateZ(50px);
        }

        /* Anillos de energía giratorios */
        .core-ring {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px solid transparent;
            border-top-color: var(--rose-gold);
            border-bottom-color: var(--rich-purple);
            box-shadow: 0 0 30px rgba(224, 191, 184, 0.3), inset 0 0 20px rgba(74, 18, 89, 0.3);
            animation: spinCore 8s linear infinite;
        }
        .core-ring:nth-child(2) {
            width: 80%; height: 80%; margin: 10%;
            border-top-color: var(--bright-gold);
            border-bottom-color: var(--rose-gold);
            animation-duration: 6s;
            animation-direction: reverse;
        }
        .core-ring:nth-child(3) {
            width: 60%; height: 60%; margin: 20%;
            border: none;
            background: radial-gradient(circle, var(--bright-gold), var(--rich-purple));
            filter: blur(10px);
            opacity: 0.6;
            animation: pulseCore 3s ease-in-out infinite;
        }


        /* --- La Carta de Cristal (Glassmorphism) --- */
        .glass-letter {
            position: relative;
            width: 80%;
            max-width: 700px;
            min-height: 250px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px); /* Efecto de cristal esmerilado */
            -webkit-backdrop-filter: blur(15px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
            transform: translateZ(80px);
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            overflow: hidden;
        }

        .letter-content {
            font-size: 1.8rem;
            color: var(--text-light);
            line-height: 1.6;
            font-weight: 400;
            opacity: 1;
            transition: opacity 0.8s ease;
        }

        /* Estilos para los diferentes tipos de texto */
        .highlight-text {
            font-family: 'Parisienne', cursive;
            font-size: 2.8rem;
            color: var(--rose-gold);
            text-shadow: 0 0 15px rgba(224, 191, 184, 0.5);
            display: block;
            margin: 20px 0;
        }

        .super-highlight-text {
            font-family: 'Parisienne', cursive;
            font-size: 3.5rem;
            background: linear-gradient(45deg, var(--rose-gold), var(--bright-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.4));
            display: block;
            margin: 25px 0;
        }

        .final-z-char {
            font-family: 'Parisienne', cursive;
            font-size: 12rem;
            line-height: 1;
            background: linear-gradient(to bottom right, var(--bright-gold), var(--rose-gold), var(--rich-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 30px var(--bright-gold));
            opacity: 0;
            transform: scale(0.8);
            animation: revealZ 3s forwards cubic-bezier(0.22, 1, 0.36, 1);
        }

        /* Cursor del efecto de máquina de escribir */
        .typing-cursor::after {
            content: '|';
            display: inline-block;
            margin-left: 5px;
            color: var(--rose-gold);
            animation: blinkCursor 0.8s infinite;
        }

        /* --- Pantalla de Inicio (Overlay) para activar sonido --- */
        #start-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #050005;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: var(--text-light);
            cursor: pointer;
            transition: opacity 1s ease;
        }
        #start-screen h1 {
            font-family: 'Parisienne', cursive;
            font-size: 3rem;
            color: var(--rose-gold);
            margin-bottom: 20px;
        }
        #start-screen p {
            font-size: 1.2rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            opacity: 0.7;
        }


        /* --- Animaciones CSS --- */
        @keyframes auroraMove {
            0% { transform: translate(-20%, -20%) rotate(0deg); }
            100% { transform: translate(10%, 10%) rotate(5deg); }
        }

        @keyframes floatBokeh {
            0% { transform: translateY(100vh) scale(0.5); opacity: 0; }
            30% { opacity: 0.6; }
            100% { transform: translateY(-10vh) scale(1.2); opacity: 0; }
        }

        @keyframes spinCore {
            0% { transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg); }
            100% { transform: rotateX(360deg) rotateY(180deg) rotateZ(360deg); }
        }

        @keyframes pulseCore {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }

        @keyframes blinkCursor {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        @keyframes revealZ {
            to { opacity: 1; transform: scale(1); }
        }

    </style>
</head>
<body>

    <div id="start-screen">
        <h1>Una Experiencia para Ti</h1>
        <p>[ Toca en cualquier lugar para comenzar ]</p>
    </div>

    <audio id="bg-music" loop preload="auto">
        <source src="https://incompetech.com/music/royalty-free/mp3-royaltyfree/Touching%20Moments%20Two%20-%20Higher.mp3" type="audio/mpeg">
    </audio>

    <div class="background-aurora"></div>
    <div class="bokeh-particles" id="bokeh-container"></div>

    <div id="stage">
        <div class="love-core-container">
            <div class="core-ring"></div>
            <div class="core-ring"></div>
            <div class="core-ring"></div>
        </div>

        <div class="glass-letter">
            <div class="letter-content typing-cursor" id="letter-text"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const startScreen = document.getElementById('start-screen');
            const bgMusic = document.getElementById('bg-music');
            const letterText = document.getElementById('letter-text');
            const stage = document.getElementById('stage');
            const bokehContainer = document.getElementById('bokeh-container');

            // --- Configuración de la Carta de Amor ---
            // type: 'normal' | 'highlight' | 'super' | 'final'
            const letterSegments = [
                { text: "A veces me detengo y pienso...", type: 'normal', pauseAfter: 1500 },
                { text: "Que eres la creación más hermosa que este universo ha diseñado.", type: 'highlight', pauseAfter: 2500 },
                { text: "En la historia de todo lo que existe, no hay nada que se compare.", type: 'normal', pauseAfter: 2000 },
                { text: "Eres lo mejor de lo mejor.", type: 'super', pauseAfter: 2500 },
                { text: "Tu luz trasciende este mundo...", type: 'normal', pauseAfter: 1500 },
                { text: "E iluminas cada realidad que tocas.", type: 'highlight', pauseAfter: 2500 },
                { text: "Eres inspiración pura. Un milagro absoluto.", type: 'super', pauseAfter: 3000 },
                { text: "Simplemente, mi todo.", type: 'normal', pauseAfter: 2000 },
                { text: "Z", type: 'final', pauseAfter: 10000 }
            ];

            // --- Función de Máquina de Escribir ---
            async function typeWriter(text, element, speed = 60) {
                element.innerHTML = '';
                // Mantener el cursor parpadeante mientras escribe
                element.classList.add('typing-cursor');
                
                for (let i = 0; i < text.length; i++) {
                    element.innerHTML += text.charAt(i);
                    // Pequeña variación aleatoria en la velocidad para realismo
                    const randomSpeed = speed + (Math.random() * 30 - 15);
                    await new Promise(resolve => setTimeout(resolve, randomSpeed));
                }
            }

            // --- Controlador de la Secuencia de la Carta ---
            async function playLetterSequence() {
                for (let i = 0; i < letterSegments.length; i++) {
                    const segment = letterSegments[i];
                    
                    // 1. Preparar el contenedor para el nuevo estilo
                    letterText.className = 'letter-content typing-cursor'; // Reset clases base

                    // 2. Manejar el caso especial final Z
                    if (segment.type === 'final') {
                         letterText.classList.remove('typing-cursor'); // Quitar cursor para la Z
                         letterText.innerHTML = `<span class="final-z-char">${segment.text}</span>`;
                    } else {
                        // 3. Escribir el texto para segmentos normales
                        // Aplicar clases de estilo según el tipo
                        if(segment.type === 'highlight') letterText.classList.add('highlight-text');
                        if(segment.type === 'super') letterText.classList.add('super-highlight-text');
                        
                        // Iniciar efecto de escritura
                        await typeWriter(segment.text, letterText);
                    }

                    // 4. Pausa para leer
                    await new Promise(resolve => setTimeout(resolve, segment.pauseAfter));

                    // 5. Desvanecer antes del siguiente segmento (si no es el último)
                    if (i < letterSegments.length - 1) {
                        letterText.style.opacity = 0;
                        await new Promise(resolve => setTimeout(resolve, 800)); // Tiempo de desvanecimiento
                        letterText.innerHTML = ''; // Limpiar
                        letterText.style.opacity = 1;
                    }
                }
            }

            // --- Generador de Bokeh (Partículas de fondo) ---
            function createBokeh() {
                for (let i = 0; i < 50; i++) {
                    const bokeh = document.createElement('div');
                    bokeh.classList.add('bokeh');
                    const size = Math.random() * 40 + 10;
                    bokeh.style.width = `${size}px`;
                    bokeh.style.height = `${size}px`;
                    bokeh.style.left = `${Math.random() * 100}%`;
                    bokeh.style.top = `${Math.random() * 100 + 20}%`;
                    // Duraciones y retrasos aleatorios para un flujo orgánico
                    bokeh.style.animationDuration = `${Math.random() * 20 + 15}s`;
                    bokeh.style.animationDelay = `-${Math.random() * 20}s`;
                    bokeh.style.opacity = Math.random() * 0.3 + 0.1;
                    bokehContainer.appendChild(bokeh);
                }
            }

            // --- Efecto de Paralaje Suave ---
            document.addEventListener('mousemove', (e) => {
                const xAxis = (window.innerWidth / 2 - e.pageX) / 30;
                const yAxis = (window.innerHeight / 2 - e.pageY) / 30;
                stage.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
            });


            // --- INICIO DE LA EXPERIENCIA (Al hacer clic) ---
            startScreen.addEventListener('click', () => {
                // Desvanecer pantalla de inicio
                startScreen.style.opacity = 0;
                setTimeout(() => startScreen.style.display = 'none', 1000);

                // Iniciar música suavemente
                bgMusic.volume = 0.5;
                bgMusic.play().catch(e => console.error("Error de audio:", e));

                // Iniciar elementos visuales
                createBokeh();
                
                // Iniciar la secuencia de la carta después de un breve momento
                setTimeout(playLetterSequence, 1500);
            });

        });
    </script>
</body>
</html>
